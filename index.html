<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Muhammad Aqeel - Researcher</title>
    <!-- Include jsPDF for PDF generation -->
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/svg2pdf.js@2/dist/svg2pdf.umd.min.js"></script>

    <!-- Vector contact icons used by the PDF -->
    <script>
        const ICONS = {
          email: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                       fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="5" width="18" height="14" rx="2" ry="2"/>
                    <path d="M3 6l9 7 9-7"/>
                  </svg>`,
          phone: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                       fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M22 16.9v2a2 2 0 0 1-2.2 2 19.8 19.8 0 0 1-8.6-3.1 19.5 19.5 0 0 1-6-6A19.8 19.8 0 0 1 2.1 4.2
                             2 2 0 0 1 4.1 2h2a2 2 0 0 1 2 1.7c.1.9.3 1.8.6 2.6a2 2 0 0 1-.4 2.1L7.1 9.9a16 16 0 0 0 7 7l1.5-1.1
                             a2 2 0 0 1 2.1-.5c.8.3 1.7.5 2.6.6A2 2 0 0 1 22 16.9z"/>
                  </svg>`,
          linkedin: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                       <rect x="2" y="2" width="20" height="20" rx="3" fill="currentColor"/>
                       <rect x="6" y="9" width="3" height="9" fill="#fff"/>
                       <rect x="6" y="6" width="3" height="2.5" fill="#fff"/>
                       <path d="M12 9h2.8v1.5h.04c.39-.7 1.35-1.5 2.78-1.5 2.98 0 3.53 1.96 3.53 4.51V18h-3v-4.01
                                c0-.96-.02-2.2-1.34-2.2-1.34 0-1.54 1.05-1.54 2.13V18H12V9z" fill="#fff"/>
                     </svg>`,
          scholar: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                       fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 3l10 6-10 6L2 9l10-6z"/><path d="M22 12v4"/><path d="M6 12v5a6 3 0 0 0 12 0v-5"/>
                  </svg>`,
          location: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M20.5 10c0 5-8.5 11-8.5 11S3.5 15 3.5 10a8.5 8.5 0 1 1 17 0z"/><circle cx="12" cy="10" r="3"/>
                    </svg>`
        };
    </script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f0f9ff;
            --bg-nav: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            --bg-white: #ffffff;
            --bg-card: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #475569;
            --text-muted: #94a3b8;
            --accent: #0891b2;
            --accent-light: #0891b2;
            --accent-dark: #0e7490;
            --border-light: rgba(0, 0, 0, 0.06);
            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.04);
            --shadow-md: 0 10px 40px rgba(0, 119, 163, 0.15);
            --shadow-lg: 0 20px 40px rgba(0, 0, 0, 0.08);
            --icon-grey: #6b7280;
        }

        html { scroll-behavior: smooth; }

        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            background: var(--bg-nav);
            backdrop-filter: blur(10px);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            z-index: 1000;
            border-bottom: 1px solid var(--border-light);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1.25rem 3rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-brand { font-size: 1.5rem; font-weight: 400; letter-spacing: -0.02em; color: var(--text-primary); }

        .nav-menu { display: flex; gap: 3rem; list-style: none; }

        .nav-link {
            color: var(--text-primary);
            text-decoration: none;
            font-size: 0.95rem;
            font-weight: 400;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            position: relative;
        }

        .nav-link:hover { color: var(--accent); }
        .nav-link.active { color: var(--accent); }
        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -5px; left: 0; right: 0; height: 2px; background: var(--accent);
        }

        /* Hamburger Menu */
        .hamburger { display: none; flex-direction: column; cursor: pointer; z-index: 1001; }
        .hamburger span { width: 25px; height: 3px; background: var(--text-primary); margin: 3px 0; transition: 0.3s; border-radius: 3px; }
        .hamburger.active span:nth-child(1) { transform: rotate(-45deg) translate(-6px, 6px); }
        .hamburger.active span:nth-child(2) { opacity: 0; }
        .hamburger.active span:nth-child(3) { transform: rotate(45deg) translate(-6px, -6px); }

        /* CV Download Button */
        .cv-download-btn {
            display: inline-flex; align-items: center; gap: 8px; padding: 12px 24px;
            background: var(--accent); color: white; text-decoration: none; font-size: 0.95rem;
            transition: all 0.3s ease; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            border: 2px solid var(--accent); font-weight: 500; cursor: pointer; margin-top: 25px;
        }
        .cv-download-btn:hover { background: var(--accent-dark); border-color: var(--accent-dark); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,119,163,0.3); }
        .cv-download-btn svg { width: 18px; height: 18px; }

        /* Hero Section */
        .hero-section {
            min-height: 100vh; display: flex; align-items: center;
            background: linear-gradient(135deg, #f8fafc 0%, #e0f2fe 100%);
            padding: 120px 3rem 80px; position: relative; z-index: 1;
        }
        .hero-container { max-width: 1400px; margin: 0 auto; width: 100%; }
        .hero-header { display: flex; align-items: flex-start; gap: 40px; margin-bottom: 50px; }

        .profile-image {
            width: 120px; height: 120px; border-radius: 50%; overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            background: linear-gradient(135deg, var(--accent-light), var(--accent));
            display: flex; align-items: center; justify-content: center; color: white;
            font-size: 48px; font-weight: 300; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; position: relative;
        }
        .profile-image img {
            width: 100%; height: 100%; object-fit: cover; object-position: center;
            display: block; position: absolute; top: 0; left: 0;
        }
        .profile-initials { z-index: 1; }

        .hero-titles { padding-top: 20px; }
        .hero-name { font-size: 3rem; font-weight: 300; margin-bottom: 10px; letter-spacing: -0.03em; line-height: 1.1; }
        .hero-title { font-size: 1.35rem; color: var(--text-secondary); font-weight: 300; }
        .hero-content-grid { display: flex; gap: 80px; align-items: flex-start; }
        .about-section { flex: 1.8; min-width: 0; }
        .hero-right { flex: 1; min-width: 0; display: flex; flex-direction: column; gap: 50px; }

        .section-label {
            font-size: 1.0rem; /* Changed from 0.85rem */
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: var(--accent);
            margin-bottom: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-weight: 600;
        }
        .about-text {
            font-size: 1.2rem; line-height: 1.8; color: var(--text-primary); font-weight: 300;
            text-align: justify; text-justify: inter-word;
        }
        .about-text a { color: var(--accent); text-decoration: none; border-bottom: 1px solid transparent; transition: all 0.3s ease; }
        .about-text a:hover { border-bottom-color: var(--accent); }

        /* Contact */
        .contact-section { padding-bottom: 30px; }
        .contact-icons { display: flex; gap: 20px; align-items: center; }
        .contact-icon-link {
            display: inline-flex; align-items: center; justify-content: center;
            width: 44px; height: 44px; border-radius: 50%;
            background: rgba(248,250,252,0.8); color: var(--icon-grey);
            transition: all 0.3s ease; text-decoration: none; border: 1px solid var(--border-light);
        }
        .contact-icon-link:hover { background: var(--accent); color: white; transform: translateY(-3px); box-shadow: 0 4px 12px rgba(0,119,163,0.3); border-color: var(--accent); }
        .contact-icon-link svg { width: 22px; height: 22px; stroke-width: 2; }
        .scholar-icon { fill: currentColor; stroke: none; }

        /* Education */
        .education-section { padding-bottom: 30px; }
        .edu-list { display: flex; flex-direction: column; gap: 14px; }
        .edu-item { padding: 16px; background: rgba(248,250,252,0.8); border-radius: 8px; transition: all 0.3s ease; border-left: 3px solid transparent; cursor: pointer; }
        .edu-item:hover { background: rgba(255,255,255,1); border-left-color: var(--accent); transform: translateX(5px); box-shadow: 0 2px 8px rgba(0,119,163,0.15); }
        .edu-year { font-size: 0.85rem; color: var(--accent); margin-bottom: 6px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; font-weight: 600; text-transform: uppercase; letter-spacing: 0.08em; }
        .edu-degree { font-size: 1.1rem; font-weight: 400; color: var(--text-primary); margin-bottom: 4px; }
        .edu-institution { font-size: 0.95rem; color: var(--text-secondary); font-style: italic; }
        .edu-institution a { color: inherit; text-decoration: none; transition: color 0.3s ease; }
        .edu-item:hover .edu-institution a { color: var(--accent); }

        /* Experience */
        .experience-section { padding: 100px 3rem; background: var(--bg-secondary); position: relative; z-index: 2; }
        .section-container { max-width: 1400px; margin: 0 auto; }
        .section-header { margin-bottom: 60px; }
        .section-title {
            font-size: 1.0rem; /* Changed from 0.85rem */
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: var(--accent);
            margin-bottom: 40px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-weight: 600;
        }
        .experience-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 40px; }
        .exp-card { background: var(--bg-card); border: 1px solid var(--border-light); padding: 35px; transition: all 0.3s ease; box-shadow: var(--shadow-sm); position: relative; overflow: hidden; border-left: 3px solid transparent; cursor: pointer;}
        .exp-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
        }
        
        .expand-icon {
            transition: transform 0.3s ease;
            color: var(--accent);
            flex-shrink: 0;
        }
        
        .exp-card.expanded .expand-icon {
            transform: rotate(180deg);
        }
        
        .exp-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease, opacity 0.3s ease, margin-top 0.3s ease;
            opacity: 0;
        }
        
        .exp-card.expanded .exp-details {
            max-height: 500px;
            opacity: 1;
            margin-top: 20px;
        }
        
        .exp-bullets {
            list-style: none;
            padding: 0;
            margin: 0 0 15px 0;
        }
        
        .exp-bullets li {
            padding-left: 25px;
            position: relative;
            margin-bottom: 10px;
            line-height: 1.6;
            color: var(--text-secondary);
            font-size: 0.95rem;
        }
        
        .exp-bullets li::before {
            content: '▸';
            position: absolute;
            left: 0;
            color: var(--accent);
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .exp-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 15px;
        }
        
        .tag {
            background: var(--bg-tertiary);
            color: var(--accent);
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-weight: 500;
            border: 1px solid var(--accent);
            transition: all 0.2s ease;
        }
        
        .tag:hover {
            background: var(--accent);
            color: white;
        }
        .exp-card:hover { transform: translateY(-3px) translateX(5px); box-shadow: var(--shadow-md); border-left-color: var(--accent)}
        .exp-badge { position: absolute; top: 15px; right: 15px; background: var(--accent); color: white; padding: 4px 12px; border-radius: 15px; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
        .exp-period { font-size: 0.85rem; color: var(--accent); margin-bottom: 10px; text-transform: uppercase; letter-spacing: 0.1em; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; font-weight: 600; }
        .exp-title { font-size: 1.25rem; font-weight: 400; color: var(--text-primary); margin-bottom: 8px; }
        .exp-company { font-size: 1.1rem; color: var(--text-secondary); margin-bottom: 20px; font-style: italic; }
        .exp-description { font-size: 1rem; color: var(--text-secondary); line-height: 1.7; }

        /* Publications */
        .publications-section { padding: 100px 3rem; background: var(--bg-tertiary); }
        .publications-grid { display: grid; gap: 30px; }
        .pub-card { background: var(--bg-white); padding: 45px; transition: all 0.3s ease; border: 1px solid var(--border-light); box-shadow: var(--shadow-sm); position: relative; }
        .pub-card:hover { transform: translateY(-3px); box-shadow: var(--shadow-lg); }
        .pub-header { display: flex; justify-content: space-between; align-items: start; margin-bottom: 25px; gap: 10px; flex-wrap: wrap; }
        .pub-type { font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--accent); font-weight: 600; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
        .pub-year { color: var(--text-muted); font-size: 0.9rem; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
        .pub-oral-badge { background: var(--accent); color: white; padding: 3px 10px; border-radius: 12px; font-size: 0.7rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; margin-left: auto; }
        .pub-title { font-size: 1.25rem; font-weight: 400; color: var(--text-primary); margin-bottom: 20px; line-height: 1.4; }
        .pub-authors { font-size: 1rem; color: var(--text-secondary); margin-bottom: 12px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
        .pub-authors .highlight { color: var(--accent-dark); font-weight: 600; }
        .pub-venue { font-size: 1.15rem; color: var(--text-primary); margin-bottom: 25px; font-style: italic; }
        .pub-links { display: flex; gap: 20px; margin-top: 25px; }
        .pub-link {
            padding: 12px 24px; background: transparent; color: var(--accent); text-decoration: none; font-size: 0.95rem;
            transition: all 0.3s ease; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; border: 2px solid var(--accent); font-weight: 500;
        }
        .pub-link:hover { background: var(--accent); color: #ffffff; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0, 119, 163, 0.3); }
        .pub-filters {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            justify-content: center;
        }
        
        .pub-filter-btn {
            padding: 10px 24px;
            background: transparent;
            color: var(--text-secondary);
            border: 2px solid var(--border-light);
            cursor: pointer;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-weight: 500;
        }
        
        .pub-filter-btn:hover {
            border-color: var(--accent);
            color: var(--accent);
        }
        
        .pub-filter-btn.active {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }
        
        /* Skills */
        .skills-section { padding: 100px 3rem; background: var(--bg-secondary); }
        .skills-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 50px; max-width: 1200px; margin: 0 auto; }
        .skill-category h3 { font-size: 1.35rem; font-weight: 400; margin-bottom: 20px; color: var(--text-primary); padding-bottom: 10px; border-bottom: 2px solid var(--accent); }
        .skill-items { display: flex; flex-direction: column; gap: 10px; }
        .skill-item { color: var(--text-secondary); font-size: 1rem; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; padding-left: 20px; position: relative; }
        .skill-item::before { content: '▸'; position: absolute; left: 0; color: var(--accent); }

        /* Footer */
        footer {
            padding: 60px 3rem; background: linear-gradient(135deg, #f8fafc 0%, #e0f2fe 100%);
            text-align: center; color: var(--text-muted); font-size: 0.9rem; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            border-top: 1px solid var(--border-light);
        }

        /* Animations */
        .fade-in { opacity: 0; transform: translateY(30px); transition: all 0.8s ease; }
        .fade-in.visible { opacity: 1; transform: translateY(0); }

        /* Mobile responsive */
        @media (max-width: 968px) {
            .hamburger { display: flex; }
            .nav-menu {
                position: fixed; left: -100%; top: 70px; flex-direction: column; background: var(--bg-nav);
                width: 100%; text-align: center; transition: 0.3s; box-shadow: 0 10px 27px rgba(0,0,0,0.05);
                padding: 2rem 0; backdrop-filter: blur(10px); border-bottom: 1px solid var(--border-light);
            }
            .nav-menu.active { left: 0; }
            .nav-link { padding: 1rem 0; display: block; }
            .hero-content-grid { flex-direction: column; gap: 50px; }
            .hero-header { flex-direction: column; align-items: center; text-align: center; }
            .hero-titles { padding-top: 0; text-align: center; }
            .about-section { text-align: center; }
            .hero-right { gap: 40px; }
            .hero-name { font-size: 2.5rem; }
            .section-title { font-size: 0.85rem; }
            .experience-grid { grid-template-columns: 1fr; }
            .pub-link { padding: 10px 20px; font-size: 0.9rem; }
            .skills-grid { grid-template-columns: 1fr; }
            .contact-icons { justify-content: center; }
            .cv-download-btn { width: 100%; justify-content: center; }
        }

        @media (max-width: 600px) {
            .nav-container { padding: 1rem 1.5rem; }
            .hero-section { padding: 100px 1.5rem 60px; }
            .hero-name { font-size: 2rem; }
            .experience-section, .publications-section, .skills-section { padding: 60px 0.85rem; }
            .exp-card, .pub-card { padding: 25px; }
            .pub-title { font-size: 1.4rem; }
            .contact-icon-link { width: 40px; height: 40px; }
            .contact-icon-link svg { width: 20px; height: 20px; }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div class="nav-brand">Muhammad Aqeel</div>
            <div class="hamburger" id="hamburger">
                <span></span><span></span><span></span>
            </div>
            <ul class="nav-menu" id="navMenu">
                <li><a href="#home" class="nav-link">Home</a></li>
                <li><a href="#experience" class="nav-link">Experience</a></li>
                <li><a href="#publications" class="nav-link">Publications</a></li>
                <li><a href="#skills" class="nav-link">Skills</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
   <section class="hero-section" id="home">
        <div class="hero-container fade-in">
            <div class="hero-header">
                <div class="profile-image">
                    <span class="profile-initials" style="display: flex; align-items: center; justify-content: center;">MA</span>
                    <img src="PPP.jpg" alt="Muhammad Aqeel" style="display: none;">
                </div>
                <div class="hero-titles">
                    <h1 class="hero-name">Muhammad Aqeel</h1>
                    <p class="hero-title">PhD Researcher</p>
                </div>
            </div>

            <div class="hero-content-grid">
                <div class="about-section">
                    <div class="section-label">About</div>
                    <p class="about-text">
                        I am pursuing my PhD in Computer Science at University of Verona, Italy, 
                        under the supervision of <a href="http://www.franzsetti.info/" target="_blank" rel="noopener noreferrer">Francesco Setti</a>,
                        where I specialized in developing advanced anomaly detection algorithms for industrial manufacturing environments.
                        My doctoral research focused on creating robust deep learning architectures that can automatically identify defects, 
                        irregularities, and quality issues in real-time production settings, addressing critical challenges in industrial 
                        automation and quality control. This work involved designing novel convolutional neural networks and unsupervised learning 
                        approaches that achieve high accuracy while maintaining computational efficiency suitable for deployment in resource-constrained 
                        industrial systems. I received my Master's degree in Computer Science from Beijing University of Posts and Telecommunications (2019-2021), 
                        under the supervision of <a href="https://ieeexplore.ieee.org/author/37089775983" target="_blank" rel="noopener noreferrer">Xiaohong Liu</a>,
                        where my research centered on Natural Language Processing with a particular focus on sentiment analysis, 
                        exploring innovative methods for understanding and classifying emotional content in text data. 
                        I graduated with my Bachelor's degree in Computer Science from PMAS Arid Agriculture University Rawalpindi, Pakistan (2013-2017), 
                        where I built a strong foundation in programming and algorithmic thinking. 
                        My interdisciplinary background spanning from industrial computer vision to natural language understanding 
                        enables me to approach complex machine learning challenges from multiple perspectives, 
                        with a current focus on advancing industrial AI through scalable and interpretable anomaly detection systems
                        that can transform manufacturing quality assurance and enable predictive maintenance strategies.
                    </p>

                    <!-- CV Download Button -->
                    <button class="cv-download-btn" onclick="generatePDF()">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7 10 12 15 17 10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                        Download CV
                    </button>
                </div>

               <div class="hero-right">
                    <div class="contact-section">
                        <div class="section-label">Connect</div>
                        <div class="contact-icons">
                            <a href="mailto:muhammad.aqeel@univr.it" class="contact-icon-link" title="Email" target="_blank" rel="noopener noreferrer">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                                    <polyline points="22,6 12,13 2,6"></polyline>
                                </svg>
                            </a>
                            <a href="https://wa.me/8618210133275" class="contact-icon-link" title="WhatsApp" target="_blank" rel="noopener noreferrer">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
                                </svg>
                            </a>
                            <a href="https://www.linkedin.com/in/muhammad-aqeel-4378b9170" class="contact-icon-link" title="LinkedIn" target="_blank" rel="noopener noreferrer">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
                                    <rect x="2" y="9" width="4" height="12"></rect>
                                    <circle cx="4" cy="4" r="2"></circle>
                                </svg>
                            </a>
                            <a href="https://scholar.google.com/citations?user=ZPUihX0AAAAJ&hl=en" class="contact-icon-link" title="Google Scholar" target="_blank" rel="noopener noreferrer">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="scholar-icon">
                                    <path d="M12 24a7 7 0 1 1 0-14 7 7 0 0 1 0 14zm0-24L0 9.5l4.838 3.94A8 8 0 0 1 12 9a8 8 0 0 1 7.162 4.44L24 9.5z"/>
                                </svg>
                            </a>
                        </div>
                    </div>

                    <div class="education-section">
                        <div class="section-label">Education</div>
                        <div class="edu-list">
                            <div class="edu-item">
                                <div class="edu-year">2022 - Present</div>
                                <div class="edu-degree">PhD in Computer Science</div>
                                <div class="edu-institution">
                                    <a href="https://www.univr.it" target="_blank" rel="noopener noreferrer">University of Verona, Italy</a>
                                </div>
                            </div>
                            <div class="edu-item">
                                <div class="edu-year">2019 - 2021</div>
                                <div class="edu-degree">Master in Computer Science</div>
                                <div class="edu-institution">
                                    <a href="https://www.bupt.edu.cn" target="_blank" rel="noopener noreferrer">Beijing University of Posts and Telecommunications, China</a>
                                </div>
                            </div>
                            <div class="edu-item">
                                <div class="edu-year">2013 - 2017</div>
                                <div class="edu-degree">Bachelor in Computer Science</div>
                                <div class="edu-institution">
                                    <a href="https://www.uaar.edu.pk" target="_blank" rel="noopener noreferrer">PMAS Arid Agriculture University Rawalpindi, Pakistan</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div><!-- hero-right -->
            </div><!-- grid -->
        </div>
    </section>

    <!-- Experience Section -->
    <section class="experience-section" id="experience">
        <div class="section-container">
            <div class="section-header fade-in">
                <h2 class="section-title">Professional Experience</h2>
            </div>
    
            <div class="experience-grid fade-in">
                <!-- REPLACE your first exp-card with this: -->
                <div class="exp-card" onclick="toggleExpand(this)">
                    <div class="exp-header">
                        <div>
                            <div class="exp-period">June 2025 - Present</div>
                            <div class="exp-title">Visiting Researcher (Mobility Period)</div>
                            <div class="exp-company">University of Ljubljana, Slovenia</div>
                        </div>
                        <div class="expand-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </div>
                    </div>
                    <div class="exp-details">
                        <ul class="exp-bullets">
                            <li>Conducting collaborative research on zero-shot anomaly detection with Prof. Danijel Skočaj</li>
                            <li>Developing contrastive learning approaches for industrial defect detection</li>
                            <li>Published 1 oral presentation at ICCV Workshop 2025</li>
                        </ul>
                        <div class="exp-tags">
                            <span class="tag">Meta-Learning</span>
                            <span class="tag">Computer Vision</span>
                            <span class="tag">PyTorch</span>
                        </div>
                    </div>
                </div>
                
                <div class="exp-card" onclick="toggleExpand(this)">
                    <div class="exp-header">
                        <div>
                            <div class="exp-period">2024 - 2025</div>
                            <div class="exp-title">Teaching Assistant</div>
                            <div class="exp-company">University of Verona, Italy</div>
                        </div>
                        <div class="expand-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </div>
                    </div>
                    <div class="exp-details">
                        <ul class="exp-bullets">
                            <li>Assisted in Computer Vision and Machine Learning courses</li>
                            <li>Supervised 15+ student projects on deep learning applications</li>
                            <li>Conducted lab sessions on PyTorch and TensorFlow implementations</li>
                        </ul>
                        <div class="exp-tags">
                            <span class="tag">Teaching</span>
                            <span class="tag">Deep Learning</span>
                            <span class="tag">Student Mentorship</span>
                        </div>
                    </div>
                </div>
                
                <div class="exp-card" onclick="toggleExpand(this)">
                    <div class="exp-header">
                        <div>
                            <div class="exp-period">2023 - 2024</div>
                            <div class="exp-title">Teaching Assistant</div>
                            <div class="exp-company">University of Verona, Italy</div>
                        </div>
                        <div class="expand-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </div>
                    </div>
                    <div class="exp-details">
                        <ul class="exp-bullets">
                            <li>Supported courses in Data Science and Computer Vision fundamentals</li>
                            <li>Developed tutorial materials and coding exercises for 80+ students</li>
                            <li>Organized workshops on industrial AI applications</li>
                        </ul>
                        <div class="exp-tags">
                            <span class="tag">Education</span>
                            <span class="tag">Curriculum Development</span>
                        </div>
                    </div>
                </div>
    
                <div class="exp-card" onclick="toggleExpand(this)">
                    <div class="exp-header">
                        <div>
                            <div class="exp-period">2021 - 2022</div>
                            <div class="exp-title">Research Assistant</div>
                            <div class="exp-company">Huazhong University of Science and Technology, Wuhan, China</div>
                        </div>
                        <div class="expand-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </div>
                    </div>
                    <div class="exp-details">
                        <ul class="exp-bullets">
                            <li>Conducted research on natural language processing and sentiment analysis</li>
                            <li>Developed semantic parsing models for aspect-based sentiment analysis</li>
                            <li>Published research in IEEE Access journal</li>
                        </ul>
                        <div class="exp-tags">
                            <span class="tag">NLP</span>
                            <span class="tag">Research</span>
                            <span class="tag">Deep Learning</span>
                        </div>
                    </div>
                </div>
    
                <div class="exp-card" onclick="toggleExpand(this)">
                    <div class="exp-header">
                        <div>
                            <div class="exp-period">2018 - 2019</div>
                            <div class="exp-title">Software Quality Assurance</div>
                            <div class="exp-company">UIIT, Arid Agriculture University, Pakistan</div>
                        </div>
                        <div class="expand-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </div>
                    </div>
                    <div class="exp-details">
                        <ul class="exp-bullets">
                            <li>Performed comprehensive testing and quality assurance for university software systems</li>
                            <li>Developed automated testing scripts to improve code reliability</li>
                            <li>Collaborated with development teams to identify and resolve software defects</li>
                        </ul>
                        <div class="exp-tags">
                            <span class="tag">QA Testing</span>
                            <span class="tag">Automation</span>
                            <span class="tag">Software Engineering</span>
                        </div>
                    </div>
                </div>
    
                <div class="exp-card" onclick="toggleExpand(this)">
                    <div class="exp-header">
                        <div>
                            <div class="exp-period">2017 - 2018</div>
                            <div class="exp-title">Software Developer</div>
                            <div class="exp-company">eConceptions (Pvt) Ltd. Pakistan</div>
                        </div>
                        <div class="expand-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </div>
                    </div>
                    <div class="exp-details">
                        <ul class="exp-bullets">
                            <li>Developed web applications using modern JavaScript frameworks</li>
                            <li>Implemented backend services and RESTful APIs</li>
                            <li>Collaborated in agile development teams to deliver client projects</li>
                        </ul>
                        <div class="exp-tags">
                            <span class="tag">Web Development</span>
                            <span class="tag">JavaScript</span>
                            <span class="tag">Full Stack</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Publications Section -->
    <section class="publications-section" id="publications">
        <div class="section-container">
            <div class="section-header fade-in">
                <h2 class="section-title">Research Publications</h2>
            </div>

            <div class="pub-filters">
                <button class="pub-filter-btn active" onclick="filterPublications(event,'all')">All Publications</button>
                <button class="pub-filter-btn" onclick="filterPublications(event,'featured')">Key Publications</button>
            </div>

            <div class="publications-grid">
                <article class="pub-card fade-in">
                    <div class="pub-header">
                        <span class="pub-type">Journal Article</span>
                        <span class="pub-year">2025</span>
                    </div>
                    <h3 class="pub-title">Semantic Parsing for Aspect Based Sentiment Analysis</h3>
                    <p class="pub-authors">
                        <span class="highlight">Muhammad Aqeel</span>, Francesco Setti
                    </p>
                    <p class="pub-venue">IEEE Access 2025</p>
                    <div class="pub-links">
                        <a href="https://ieeexplore.ieee.org/abstract/document/11078252" class="pub-link" target="_blank" rel="noopener noreferrer">Paper</a>
                    </div>
                </article>

                <article class="pub-card fade-in" data-featured="true">
                    <div class="pub-header">
                        <span class="pub-type">Conference</span>
                        <span class="pub-year">2025</span>
                    </div>
                    <h3 class="pub-title">Towards Real Unsupervised Anomaly Detection Via Confident Meta-Learning</h3>
                    <p class="pub-authors">
                        <span class="highlight">Muhammad Aqeel</span>, Shakiba Sharifi, Marco Cristani, Francesco Setti
                    </p>
                    <p class="pub-venue">ICCV 2025 - International Conference on Computer Vision</p>
                    <div class="pub-links">
                        <a href="https://arxiv.org/abs/2508.02293" class="pub-link" target="_blank" rel="noopener noreferrer">Paper</a>
                    </div>
                </article>

                <article class="pub-card fade-in" data-featured="true">
                    <div class="pub-header">
                        <span class="pub-type">Conference</span>
                        <span class="pub-year">2024</span>
                    </div>
                    <h3 class="pub-title">Meta Learning-Driven Iterative Refinement for Robust Anomaly Detection in Industrial Inspection</h3>
                    <p class="pub-authors">
                        <span class="highlight">Muhammad Aqeel</span>, Shakiba Sharifi, Marco Cristani, Francesco Setti
                    </p>
                    <p class="pub-venue">
                        ECCV 2024 - European Conference on Computer Vision
                        <span class="pub-oral-badge">Oral</span>
                    </p>
                    <div class="pub-links">
                        <a href="https://link.springer.com/chapter/10.1007/978-3-031-92805-5_28" class="pub-link" target="_blank" rel="noopener noreferrer">Paper</a>
                    </div>
                </article>

                <article class="pub-card fade-in" data-featured="true">
                    <div class="pub-header">
                        <span class="pub-type">Conference</span>
                        <span class="pub-year">2025</span>
                    </div>
                    <h3 class="pub-title">A Contrastive Learning-Guided Confident Meta-learning for Zero Shot Anomaly Detection</h3>
                    <p class="pub-authors">
                        <span class="highlight">Muhammad Aqeel</span>, Danijel Skocaj, Marco Cristani, Francesco Setti
                    </p>
                    <p class="pub-venue">
                        ICCVW 2025 - VISION Workshop at International Conference on Computer Vision
                        <span class="pub-oral-badge">Oral</span>
                    </p>
                    <div class="pub-links">
                        <a href="https://arxiv.org/abs/2508.17827" class="pub-link" target="_blank" rel="noopener noreferrer">Paper</a>
                    </div>
                </article>

                <article class="pub-card fade-in" data-featured="true">
                    <div class="pub-header">
                        <span class="pub-type">Conference</span>
                        <span class="pub-year">2025</span>
                    </div>
                    <h3 class="pub-title">Robust Anomaly Detection in Industrial Environments via Meta-Learning</h3>
                    <p class="pub-authors">
                        <span class="highlight">Muhammad Aqeel</span>, Shakiba Sharifi, Marco Cristani, Francesco Setti
                    </p>
                    <p class="pub-venue">
                        ICCVW 2025 - VISION Workshop at International Conference on Computer Vision
                        <span class="pub-oral-badge">Oral</span>
                    </p>
                    <div class="pub-links">
                        <a href="https://arxiv.org/abs/2508.17789" class="pub-link" target="_blank" rel="noopener noreferrer">Paper</a>
                    </div>
                </article>

                <article class="pub-card fade-in" data-featured="false">
                    <div class="pub-header">
                        <span class="pub-type">Conference</span>
                        <span class="pub-year">2025</span>
                    </div>
                    <h3 class="pub-title">Diffusion-Based Data Augmentation for Medical Image Segmentation</h3>
                    <p class="pub-authors">
                        Maham Nazir, <span class="highlight">Muhammad Aqeel</span>, Francesco Setti
                    </p>
                    <p class="pub-venue">
                        ICCVW 2025 - CVAMD Workshop at International Conference on Computer Vision
                    </p>
                    <div class="pub-links">
                        <a href="https://arxiv.org/abs/2508.17844" class="pub-link" target="_blank" rel="noopener noreferrer">Paper</a>
                    </div>
                </article>

                <article class="pub-card fade-in">
                    <div class="pub-header">
                        <span class="pub-type">Conference</span>
                        <span class="pub-year">2025</span>
                    </div>
                    <h3 class="pub-title">RoadFusion: Latent Diffusion Model for Pavement Defect Detection</h3>
                    <p class="pub-authors">
                        <span class="highlight">Muhammad Aqeel</span>, Kidus Dagnaw Bellete, Francesco Setti
                    </p>
                    <p class="pub-venue">
                        ICIAP 2025 - International Conference on Image Analysis and Processing
                        <span class="pub-oral-badge">Oral</span>
                    </p>
                    <div class="pub-links">
                        <a href="https://arxiv.org/abs/2507.15346" class="pub-link" target="_blank" rel="noopener noreferrer">Paper</a>
                    </div>
                </article>

                <article class="pub-card fade-in">
                    <div class="pub-header">
                        <span class="pub-type">Conference</span>
                        <span class="pub-year">2025</span>
                    </div>
                    <h3 class="pub-title">ExDD: Explicit Dual Distribution Learning for Surface Defect Detection via Diffusion Synthesis</h3>
                    <p class="pub-authors">
                        <span class="highlight">Muhammad Aqeel</span>, Federico Leonardi, Francesco Setti
                    </p>
                    <p class="pub-venue">ICIAP 2025 - International Conference on Image Analysis and Processing</p>
                    <div class="pub-links">
                        <a href="https://arxiv.org/abs/2507.15335" class="pub-link" target="_blank" rel="noopener noreferrer">Paper</a>
                    </div>
                </article>

                <article class="pub-card fade-in">
                    <div class="pub-header">
                        <span class="pub-type">Conference</span>
                        <span class="pub-year">2025</span>
                    </div>
                    <h3 class="pub-title">Latent Space Synergy: Text-Guided Data Augmentation for Direct Diffusion Biomedical Segmentation</h3>
                    <p class="pub-authors">
                        <span class="highlight">Muhammad Aqeel</span>, Maham Nazir, Zanxi Ruan, Francesco Setti
                    </p>
                    <p class="pub-venue">ICIAP 2025 - International Conference on Image Analysis and Processing</p>
                    <div class="pub-links">
                        <a href="https://arxiv.org/abs/2507.15361" class="pub-link" target="_blank" rel="noopener noreferrer">Paper</a>
                    </div>
                </article>

                <article class="pub-card fade-in">
                    <div class="pub-header">
                        <span class="pub-type">Conference</span>
                        <span class="pub-year">2025</span>
                    </div>
                    <h3 class="pub-title">Self-Supervised Iterative Refinement for Anomaly Detection in Industrial Quality Control</h3>
                    <p class="pub-authors">
                        <span class="highlight">Muhammad Aqeel</span>, Shakiba Sharifi, Marco Cristani, Francesco Setti
                    </p>
                    <p class="pub-venue">
                        VISAPP 2025 - International Joint Conference on Computer Vision, Imaging and Computer Graphics Theory and Applications
                        <span class="pub-oral-badge">Oral</span>
                    </p>
                    <div class="pub-links">
                        <a href="https://www.scitepress.org/Link.aspx?doi=10.5220/0013178100003912" class="pub-link" target="_blank" rel="noopener noreferrer">Paper</a>
                    </div>
                </article>

                <article class="pub-card fade-in">
                    <div class="pub-header">
                        <span class="pub-type">Conference</span>
                        <span class="pub-year">2024</span>
                    </div>
                    <h3 class="pub-title">Self-supervised Learning for Robust Surface Defect Detection</h3>
                    <p class="pub-authors">
                        <span class="highlight">Muhammad Aqeel</span>, Shakiba Sharifi, Marco Cristani, Francesco Setti
                    </p>
                    <p class="pub-venue">
                        DeLTA 2024- International Conference on Deep Learning Theory and Applications
                        <span class="pub-oral-badge">Oral</span>
                    </p>
                    <div class="pub-links">
                        <a href="https://link.springer.com/chapter/10.1007/978-3-031-66705-3_11" class="pub-link" target="_blank" rel="noopener noreferrer">Paper</a>
                    </div>
                </article>

                <article class="pub-card fade-in">
                    <div class="pub-header">
                        <span class="pub-type">Conference</span>
                        <span class="pub-year">2024</span>
                    </div>
                    <h3 class="pub-title">Diffusion-based Image Generation for In-distribution Data Augmentation in Surface Defect Detection</h3>
                    <p class="pub-authors">
                        Luigi Capogrosso, Federico Girella, Francesco Taioli, Michele Dalla Chiara, <span class="highlight">Muhammad Aqeel</span>, Franco Fummi, Francesco Setti, Marco Cristani
                    </p>
                    <p class="pub-venue">VISAPP 2024 - International Joint Conference on Computer Vision, Imaging and Computer Graphics Theory and Applications</p>
                    <div class="pub-links">
                        <a href="https://www.scitepress.org/Link.aspx?doi=10.5220/0012350400003660" class="pub-link" target="_blank" rel="noopener noreferrer">Paper</a>
                        <a href="https://github.com/intelligolabs/in_and_out" class="pub-link" target="_blank" rel="noopener noreferrer">Code</a>
                    </div>
                </article>
            </div>
        </div>
    </section>

    <!-- Skills Section -->
    <section class="skills-section" id="skills">
        <div class="section-container">
            <div class="section-header fade-in">
                <h2 class="section-title">Technical Expertise</h2>
            </div>
            <div class="skills-grid fade-in">
                <div class="skill-category">
                    <h3>Research Areas</h3>
                    <div class="skill-items">
                        <div class="skill-item">Machine Learning</div>
                        <div class="skill-item">Computer Vision</div>
                        <div class="skill-item">Anomaly Detection</div>
                        <div class="skill-item">Natural Language Processing</div>
                    </div>
                </div>
                <div class="skill-category">
                    <h3>Programming Languages</h3>
                    <div class="skill-items">
                        <div class="skill-item">Python</div>
                        <div class="skill-item">C++</div>
                        <div class="skill-item">JavaScript</div>
                        <div class="skill-item">Bash/Shell Scripting</div>
                    </div>
                </div>
                <div class="skill-category">
                    <h3>Frameworks & Libraries</h3>
                    <div class="skill-items">
                        <div class="skill-item">PyTorch</div>
                        <div class="skill-item">TensorFlow</div>
                        <div class="skill-item">Scikit-learn</div>
                        <div class="skill-item">OpenCV</div>
                    </div>
                </div>
                <div class="skill-category">
                    <h3>Tools & Technologies</h3>
                    <div class="skill-items">
                        <div class="skill-item">Git/GitHub</div>
                        <div class="skill-item">LaTeX</div>
                        <div class="skill-item">Jupyter Notebooks</div>
                        <div class="skill-item">Linux/Unix</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 Muhammad Aqeel. All rights reserved.</p>
    </footer>

    <script>
        // ==========================================
        // UI SCRIPTS — YOUR ORIGINAL BEHAVIOUR
        // ==========================================
        // Hamburger
        const hamburger = document.getElementById('hamburger');
        const navMenu = document.getElementById('navMenu');
        hamburger.addEventListener('click', () => {
            hamburger.classList.toggle('active');
            navMenu.classList.toggle('active');
        });
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', () => {
                hamburger.classList.remove('active');
                navMenu.classList.remove('active');
            });
        });

        // ADD THE FILTER FUNCTION HERE
        function filterPublications(evt, filter) {
            const buttons = document.querySelectorAll('.pub-filter-btn');
            const publications = document.querySelectorAll('.pub-card');
        
            // Update active button
            buttons.forEach(btn => btn.classList.remove('active'));
            if (evt && evt.currentTarget) evt.currentTarget.classList.add('active');
        
            // Filter publications
            publications.forEach(pub => {
              if (filter === 'all') {
                pub.style.display = '';
              } else {
                pub.style.display = (pub.dataset.featured === 'true') ? '' : 'none';
              }
            });
        }

        // Scroll active link
        const sections = document.querySelectorAll('section');
        const navLinks = document.querySelectorAll('.nav-link');
        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (scrollY >= (sectionTop - 200)) { current = section.getAttribute('id'); }
            });
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href').slice(1) === current) {
                    link.classList.add('active');
                }
            });
        });

        // Fade-in observer
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('visible'); });
        }, { threshold: 0.1, rootMargin: '0px 0px -100px 0px' });
        document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));

        // Robust image source attempts
        window.addEventListener('DOMContentLoaded', () => {
            const img = document.querySelector('.profile-image img');
            const sources = ['PPP.jpg', 'PPP.JPG', './PPP.jpg', './PPP.JPG', 'ppp.jpg', 'profile.jpg'];
            let currentIndex = 0;
            if (img) {
                img.style.display = 'none';
                const tryLoadImage = () => { if (currentIndex < sources.length) img.src = sources[currentIndex]; };
                img.addEventListener('load', function() {
                    this.style.display = 'block';
                    const initials = document.querySelector('.profile-initials');
                    if (initials) initials.style.display = 'none';
                });
                img.addEventListener('error', function() {
                    currentIndex++;
                    if (currentIndex < sources.length) tryLoadImage();
                    else {
                        this.style.display = 'none';
                        const initials = document.querySelector('.profile-initials');
                        if (initials) initials.style.display = 'flex';
                    }
                });
                tryLoadImage();
            }
        });

        // ==========================================
        // PDF GENERATOR — CLEAN LAYOUT (CV-only)
        // ==========================================

        // Config toggles
        const IMAGE_SHAPE = 'circle';    // 'circle' | 'square'  (true crop via canvas, no overlay)
        const ORAL_PLACEMENT = 'afterVenue'; // 'afterVenue' | 'afterTitle'

        // Publications data (with ORAL flag)
        const allPublications = [
            {
                title: "Semantic Parsing for Aspect Based Sentiment Analysis",
                authors: ["Muhammad Aqeel", "Francesco Setti"],
                venue: "IEEE Access 2025",
                link: "https://ieeexplore.ieee.org/abstract/document/11078252",
                oral: false
            },
            {
                title: "Towards Real Unsupervised Anomaly Detection Via Confident Meta-Learning",
                authors: ["Muhammad Aqeel", "Shakiba Sharifi", "Marco Cristani", "Francesco Setti"],
                venue: "ICCV 2025 - International Conference on Computer Vision",
                link: "https://arxiv.org/abs/2508.02293",
                oral: false
            },
            {
                title: "Meta Learning-Driven Iterative Refinement for Robust Anomaly Detection in Industrial Inspection",
                authors: ["Muhammad Aqeel", "Shakiba Sharifi", "Marco Cristani", "Francesco Setti"],
                venue: "ECCVW 2024 - VISION Workshop at European Conference on Computer Vision",
                link: "https://link.springer.com/chapter/10.1007/978-3-031-92805-5_28",
                oral: false
            },
            {
                title: "A Contrastive Learning-Guided Confident Meta-learning for Zero Shot Anomaly Detection",
                authors: ["Muhammad Aqeel", "Danijel Skocaj", "Marco Cristani", "Francesco Setti"],
                venue: "ICCVW 2025 - VISION Workshop at International Conference on Computer Vision",
                link: "https://arxiv.org/abs/2508.17827",
                oral: false
            },
            {
                title: "Robust Anomaly Detection in Industrial Environments via Meta-Learning",
                authors: ["Muhammad Aqeel", "Shakiba Sharifi", "Marco Cristani", "Francesco Setti"],
                venue: "ICCVW 2025 - VISION Workshop at International Conference on Computer Vision",
                link: "https://arxiv.org/abs/2508.17789",
                oral: false
            },
            {
                title: "Diffusion-Based Data Augmentation for Medical Image Segmentation",
                authors: ["Maham Nazir", "Muhammad Aqeel", "Francesco Setti"],
                venue: "ICCVW 2025 - CVAMD Workshop at International Conference on Computer Vision",
                link: "https://arxiv.org/abs/2508.17844",
                oral: false
            },
            {
                title: "RoadFusion: Latent Diffusion Model for Pavement Defect Detection",
                authors: ["Muhammad Aqeel", "Kidus Dagnaw Bellete", "Francesco Setti"],
                venue: "ICIAP 2025 - International Conference on Image Analysis and Processing",
                link: "https://arxiv.org/abs/2507.15346",
                oral: false
            },
            {
                title: "ExDD: Explicit Dual Distribution Learning for Surface Defect Detection via Diffusion Synthesis",
                authors: ["Muhammad Aqeel", "Federico Leonardi", "Francesco Setti"],
                venue: "ICIAP 2025 - International Conference on Image Analysis and Processing",
                link: "https://arxiv.org/abs/2507.15335",
                oral: false
            },
            {
                title: "Latent Space Synergy: Text-Guided Data Augmentation for Direct Diffusion Biomedical Segmentation",
                authors: ["Muhammad Aqeel", "Maham Nazir", "Zanxi Ruan", "Francesco Setti"],
                venue: "ICIAP 2025 - International Conference on Image Analysis and Processing",
                link: "https://arxiv.org/abs/2507.15361",
                oral: false
            },
            {
                title: "Self-Supervised Iterative Refinement for Anomaly Detection in Industrial Quality Control",
                authors: ["Muhammad Aqeel", "Shakiba Sharifi", "Marco Cristani", "Francesco Setti"],
                venue: "VISAPP 2025 - International Joint Conference on Computer Vision, Imaging and Computer Graphics Theory and Applications",
                link: "https://www.scitepress.org/Link.aspx?doi=10.5220/0013178100003912",
                oral: true
            },
            {
                title: "Self-supervised Learning for Robust Surface Defect Detection",
                authors: ["Muhammad Aqeel", "Shakiba Sharifi", "Marco Cristani", "Francesco Setti"],
                venue: "DeLTA 2024 - International Conference on Deep Learning Theory and Applications",
                link: "https://link.springer.com/chapter/10.1007/978-3-031-66705-3_11",
                oral: false
            },
            {
                title: "Diffusion-based Image Generation for In-distribution Data Augmentation in Surface Defect Detection",
                authors: ["Luigi Capogrosso", "Federico Girella", "Francesco Taioli", "Michele Dalla Chiara", "Muhammad Aqeel", "Franco Fummi", "Francesco Setti", "Marco Cristani"],
                venue: "VISAPP 2024 - International Joint Conference on Computer Vision, Imaging and Computer Graphics Theory and Applications",
                link: "https://www.scitepress.org/Link.aspx?doi=10.5220/0012350400003660",
                oral: false
            }
        ];

        // References (moved from supervisors)
        const references = [
            { name: "Francesco Setti", role: "Associate Professor, University of Verona, Italy", email: "francesco.setti@univr.it", phone: "(+39) 3491959381" },
            { name: "Xiaohong Liu", role: "Professor, Beijing University of Posts and Telecommunications, China", email: "xiaohongliu@bupt.edu.cn", phone: "(+86) 13910396374" }
        ];

        // ===== Helper: circular/square masked PNG from <img> (no overlay) =====
        async function getMaskedImageDataURL(imgEl, sizePx = 512, shape = 'circle') {
            return new Promise(resolve => {
                try {
                    const cvs = document.createElement('canvas');
                    cvs.width = cvs.height = sizePx;
                    const ctx = cvs.getContext('2d');
                    ctx.clearRect(0,0,sizePx,sizePx);

                    if (shape === 'circle') {
                        ctx.save();
                        ctx.beginPath();
                        ctx.arc(sizePx/2, sizePx/2, sizePx/2, 0, Math.PI * 2);
                        ctx.closePath();
                        ctx.clip();
                    }

                    // cover fit
                    const iw = imgEl.naturalWidth || imgEl.width;
                    const ih = imgEl.naturalHeight || imgEl.height;
                    const r = Math.max(sizePx/iw, sizePx/ih);
                    const nw = iw * r, nh = ih * r;
                    const dx = (sizePx - nw) / 2, dy = (sizePx - nh) / 2;
                    ctx.drawImage(imgEl, dx, dy, nw, nh);

                    if (shape === 'circle') ctx.restore();
                    resolve(cvs.toDataURL('image/png'));
                } catch (e) {
                    resolve(null);
                }
            });
        }

        // ===== Helper: draw divider line =====
        function drawDivider(doc, x1, y, x2) {
            doc.setLineWidth(0.4);
            doc.line(x1, y, x2, y);
        }

        // ===== Helper: justified paragraph (manual), fallback to left if too narrow =====
        function drawJustifiedParagraph(doc, text, x, y, width, lineHeight) {
            // Split to lines greedily
            const words = text.split(/\s+/);
            let line = '', lines = [];
            words.forEach(w => {
                const test = line ? line + ' ' + w : w;
                if (doc.getTextWidth(test) <= width) line = test;
                else { lines.push(line); line = w; }
            });
            if (line) lines.push(line);

            lines.forEach((ln, idx) => {
                const isLast = idx === lines.length - 1;
                if (isLast || !ln.includes(' ')) {
                    doc.text(ln, x, y); // last line left-aligned
                } else {
                    // distribute extra space
                    const parts = ln.split(' ');
                    const wordsWidth = parts.reduce((acc, w) => acc + doc.getTextWidth(w), 0);
                    const gaps = parts.length - 1;
                    const extra = (width - wordsWidth) / gaps;
                    let cx = x;
                    parts.forEach((w, i) => {
                        doc.text(w, cx, y);
                        cx += doc.getTextWidth(w) + extra;
                    });
                }
                y += lineHeight;
            });
            return y;
        }

        // ===== Helper: add wrapped clickable lines (black) =====
        function addWrappedLink(doc, text, x, y, maxWidth, url) {
            const lines = doc.splitTextToSize(text, maxWidth);
            lines.forEach((ln, i) => {
                doc.textWithLink(ln, x, y, { url });
                y += 4;
            });
            return y;
        }

        // ===== PDF Generation Function (CV ONLY) =====        
        async function generatePDF() {
            const jspdfNS = window.jspdf;
            if (!jspdfNS || !jspdfNS.jsPDF) {
                alert('PDF library is still loading. Please try again in a moment.');
                return;
            }
            const { jsPDF } = jspdfNS;
            const doc = new jsPDF({ unit: 'mm', format: 'a4' });
        
            // ── Layout
            const ML = 20, MR = 20, TOP = 20;
            const CONTENT_W = 210 - ML - MR;
            const LEFT = ML, RIGHT = 210 - MR;
        
            // ── Colors
            const BLACK  = [20, 20, 20];
            const ACCENT = [25, 67, 125];   // Oxford Blue
            const GREY   = [88, 96, 105];
            const WHITE  = [255, 255, 255];
            const LIGHT_GREY = [245, 245, 245];
            const setColor = (c) => doc.setTextColor(...c);
        
            // ── Modern Academic Section Header with colored background
            function drawModernSectionHeader(doc, title, x, y, width = CONTENT_W) {
                // Add colored background
                doc.setFillColor(...ACCENT);
                doc.rect(x, y - 5, width, 7, 'F');
                
                // Add white text
                setColor(WHITE);
                doc.setFont('helvetica', 'bold');
                doc.setFontSize(10);
                doc.text(title.toUpperCase(), x + 2, y);
                
                // Reset color
                setColor(BLACK);
                return y + 7;
            }
        
            // ── Justify text helper (better than justified for modern look)
            function drawText(doc, text, x, y, width, lineHeight, color = BLACK) {
              setColor(color);
              const lines = doc.splitTextToSize(text, width);
              const lastIdx = lines.length - 1;
            
              lines.forEach((line, i) => {
                if (y > 270) { doc.addPage(); y = TOP; }
            
                // last line: left-align (typical in justification)
                if (i === lastIdx || !line.includes(' ')) {
                  doc.text(line, x, y);
                  y += lineHeight;
                  return;
                }
            
                // distribute extra space between words
                const words = line.trim().split(/\s+/);
                const baseWidths = words.map(w => doc.getTextWidth(w));
                const spaceW = doc.getTextWidth(' ');
                const naturalWidth = baseWidths.reduce((a,b)=>a+b,0) + spaceW * (words.length - 1);
                const extraPerGap = (width - naturalWidth) / (words.length - 1);
            
                let cursorX = x;
                words.forEach((w, j) => {
                  doc.text(w, cursorX, y);
                  if (j < words.length - 1) {
                    cursorX += doc.getTextWidth(w) + spaceW + Math.max(0, extraPerGap);
                  }
                });
            
                y += lineHeight;
              });
            
              return y;
            }
        
            // ── Header Block with better layout
            let y = TOP;
            
            // Left side - Name and Title
            setColor(ACCENT);
            doc.setFont('helvetica', 'bold');
            doc.setFontSize(26);
            doc.text("Muhammad Aqeel", LEFT, y);
            
            y += 8; 
            setColor(GREY);
            doc.setFont('helvetica', 'italic');
            doc.setFontSize(12);
            doc.text("Curriculum Vitae", LEFT, y);
            
            doc.setFontSize(9);
            setColor(GREY);
            doc.setFont('helvetica', 'italic');
            
            // Calculate right-aligned position for contact info
            const contactX = RIGHT - 40;
            let contactY = TOP + 2;
            
            // Profile image (if available)
            const imgEl = document.querySelector('.profile-image img');
            if (imgEl && imgEl.style.display !== 'none' && imgEl.naturalWidth > 0) {
                try {
                    const masked = await getMaskedImageDataURL(imgEl, 520, IMAGE_SHAPE);
                    if (masked) {
                        doc.addImage(masked, 'PNG', RIGHT - 35, TOP - 5, 30, 30);
                        // Adjust contact info position if image exists
                        doc.text("University of Verona", contactX, contactY, { align: 'right' });
                        contactY += 4;
                        doc.text("Strada le Grazie 15, Italy", contactX, contactY, { align: 'right' });
                        contactY += 4;
                        doc.text("muhammad.aqeel@univr.it", contactX, contactY, { align: 'right' });
                        contactY += 4;
                        doc.text("+86 182 1013 3275", contactX, contactY, { align: 'right' });
                        contactY += 4;
                        doc.text("linkedin.com/in/muhammad-aqeel", contactX, contactY, { align: 'right' });
                        contactY += 4;
                        doc.text("https://aqeeelmirza.github.io/", contactX, contactY, { align: 'right' });
                    }
                } catch (e) {
                    console.error('Image loading error:', e);
                }
            } else {
                // If no image, display contact info normally
                doc.text("University of Verona", RIGHT, contactY, { align: 'right' });
                contactY += 4;
                doc.text("Strada le Grazie 15, Italy", RIGHT, contactY, { align: 'right' });
                contactY += 4;
                doc.text("muhammad.aqeel@univr.it", RIGHT, contactY, { align: 'right' });
                contactY += 4;
                doc.text("+86 182 1013 3275", RIGHT, contactY, { align: 'right' });
                contactY += 4;
                doc.text("linkedin.com/in/muhammad-aqeel", RIGHT, contactY, { align: 'right' });
                contactY += 4;
                doc.text("https://aqeeelmirza.github.io/", RIGHT, contactY, { align: 'right' });
            }
            
            // Horizontal line under header
            y = Math.max(y + 15, contactY + 8);
            doc.setDrawColor(...ACCENT);
            doc.setLineWidth(2);
            doc.line(LEFT, y, RIGHT, y);
            doc.setLineWidth(0.3);
            doc.setDrawColor(0, 0, 0);
            
            y += 10;
        
            // ── About Section (Enhanced)
            y = drawModernSectionHeader(doc, "About", LEFT, y);
            doc.setFont('helvetica', 'normal');
            doc.setFontSize(10);
            const aboutText = "I am a PhD researcher at the University of Verona specializing in anomaly detection for industrial manufacturing. My work focuses on developing deep learning algorithms that can identify defects and quality issues in real-time production environments. I have a multidisciplinary background, having earned a master's degree from Beijing University of Posts and Telecommunications in China, where my research focus was over natural language processing. Now working in computer vision, I bring a unique perspective to solving complex machine learning challenges. My research has resulted in more than 10 publications in international conferences, with particular emphasis on confident learning, self-supervised learning, and meta-learning approaches that achieve high accuracy while remaining computationally efficient for deployment on edge devices. I am passionate about bridging the gap between theoretical AI research and practical industrial applications.";
            y = drawText(doc, aboutText, LEFT, y, CONTENT_W, 4.8, BLACK);
            
            y += 7;
            
            // ── Research Interests Section
            if (y > 250) { doc.addPage(); y = TOP; }
            y = drawModernSectionHeader(doc, "Research Interests", LEFT, y);
            doc.setFont('helvetica', 'normal');
            doc.setFontSize(10);
            const researchText = "My research centers on developing robust anomaly detection systems for industrial quality control. I am particularly interested in how self-supervised and meta-learning techniques can enable models to detect previously unseen defects without extensive labeled data. Currently, I'm exploring diffusion models for generating synthetic defect data to augment limited industrial datasets. A key focus of my work is ensuring these systems are not just accurate but also interpretable and efficient enough for real-time deployment in manufacturing environments. I'm also investigating zero-shot anomaly detection methods that can generalize across different product types and manufacturing processes. My broader interest lies in making industrial AI systems more accessible and practical for real-world deployment.";
            y = drawText(doc, researchText, LEFT, y, CONTENT_W, 4.8, BLACK);
            
            y += 7;
        
            // ── Education Section
            if (y > 250) { doc.addPage(); y = TOP; }
            y = drawModernSectionHeader(doc, "Education", LEFT, y);
            doc.setFontSize(10);
            const edu = [
                { 
                    degree: "Doctor of Philosophy in Computer Science", 
                    period: "2022–Present", 
                    inst: "University of Verona, Italy",
                },
                { 
                    degree: "Master of Science in Computer Science", 
                    period: "2019–2021", 
                    inst: "Beijing University of Posts and Telecommunications, China",
                },
                { 
                    degree: "Bachelor of Science in Computer Science", 
                    period: "2013–2017", 
                    inst: "PMAS Arid Agriculture University, Pakistan",
                }
            ];
            
            edu.forEach(e => {
                if (y > 260) { doc.addPage(); y = TOP; }
                
                // Degree and period on same line
                doc.setFont('helvetica', 'bold');
                setColor(BLACK);
                const periodWidth = doc.getTextWidth(e.period);
                doc.text(e.degree, LEFT, y);
                doc.setFont('helvetica', 'normal');
                setColor(GREY);
                doc.text(e.period, RIGHT, y, { align: 'right' });
                
                y += 4.5;
                setColor(GREY);
                doc.setFont('helvetica', 'normal');
                doc.text(e.inst, LEFT + 5, y);
                
                if (e.details) {
                    y += 4;
                    doc.setFont('helvetica', 'italic');
                    doc.setFontSize(9);
                    setColor(GREY);
                    doc.text(e.details, LEFT + 5, y);
                    doc.setFontSize(10);
                    doc.setFont('helvetica', 'normal');
                }
                y += 7;
            });

            // ── Funding & Grants Section (NEW)
            y += 3;
            if (y > 250) { doc.addPage(); y = TOP; }
            y = drawModernSectionHeader(doc, "Funding & Grants", LEFT, y);
            doc.setFontSize(10);
            
            const funding = [
                { 
                    title: "PNRR Funding for PhD", 
                    period: "2022–2025", 
                    org: "University of Verona",
                    amount: "Full tuition + €16,500/year stipend"
                },
                { 
                    title: "Mobility Research Grant", 
                    period: "2025", 
                    org: "University of Ljubljana",
                    amount: "€6,000"
                },
                { 
                    title: "Chinese Government Scholarship", 
                    period: "2019–2021", 
                    org: "Beijing University of Posts and Telecommunications",
                    amount: "Full tuition + living allowance"
                }
            ];
            
            funding.forEach(f => {
                if (y > 260) { doc.addPage(); y = TOP; }
                
                doc.setFont('helvetica', 'bold');
                setColor(BLACK);
                doc.text(f.title, LEFT, y);
                doc.setFont('helvetica', 'normal');
                setColor(GREY);
                doc.text(f.period, RIGHT, y, { align: 'right' });
                
                y += 4.5;
                setColor(GREY);
                doc.text(f.org, LEFT + 5, y);
                
                if (f.amount) {
                    y += 4;
                    doc.setFont('helvetica', 'italic');
                    doc.setFontSize(9);
                    doc.text(f.amount, LEFT + 5, y);
                    doc.setFontSize(10);
                    doc.setFont('helvetica', 'normal');
                }
                y += 7;
            });
        
            // ── Professional Experience
            y += 3;
            if (y > 250) { doc.addPage(); y = TOP; }
            y = drawModernSectionHeader(doc, "Professional Experience", LEFT, y);
            doc.setFontSize(10);
            const experiences = [
                { 
                    title: "Visiting Researcher", 
                    period: "June 2025–Present", 
                    org: "University of Ljubljana, Slovenia",
                },
                { 
                    title: "Teaching Assistant", 
                    period: "2024–2025", 
                    org: "University of Verona, Italy",
                },
                { 
                    title: "Teaching Assistant", 
                    period: "2023–2024", 
                    org: "University of Verona, Italy",
                },
                { 
                    title: "Research Assistant", 
                    period: "2021–2022", 
                    org: "Huazhong University of Science and Technology, China",
                },
                { 
                    title: "Software Quality Assurance Engineer", 
                    period: "2018–2019", 
                    org: "UIIT, Arid Agriculture University, Pakistan"
                },
                { 
                    title: "Software Developer", 
                    period: "2017–2018", 
                    org: "eConceptions (Pvt) Ltd., Pakistan"
                }
            ];
            
            experiences.forEach(ex => {
                if (y > 260) { doc.addPage(); y = TOP; }
                
                doc.setFont('helvetica', 'bold');
                setColor(BLACK);
                doc.text(ex.title, LEFT, y);
                doc.setFont('helvetica', 'normal');
                setColor(GREY);
                doc.text(ex.period, RIGHT, y, { align: 'right' });
                
                y += 4.5;
                setColor(GREY);
                doc.text(ex.org, LEFT + 5, y);
                
                if (ex.desc) {
                    y += 4;
                    doc.setFontSize(9);
                    doc.setFont('helvetica', 'italic');
                    doc.text(ex.desc, LEFT + 5, y);
                    doc.setFontSize(10);
                    doc.setFont('helvetica', 'normal');
                }
                y += 7;
            });
        
            // ── Technical Skills (reorganized for better presentation)
            y += 3;
            if (y > 250) { doc.addPage(); y = TOP; }
            y = drawModernSectionHeader(doc, "Technical Skills", LEFT, y);
            doc.setFontSize(10);
            
            const skills = [
                { category: "Programming:", items: "Python, C++, JavaScript, MATLAB, Bash/Shell" },
                { category: "ML/DL Frameworks:", items: "PyTorch, TensorFlow, JAX, Scikit-learn, OpenCV" },
                { category: "Tools & Platforms:", items: "Git, Docker, AWS, LaTeX, Jupyter, Linux/Unix" },
                { category: "Specializations:", items: "Computer Vision, Anomaly Detection, Meta-Learning, Edge Computing" }
            ];
            
            skills.forEach(s => {
                if (y > 270) { doc.addPage(); y = TOP; }
                doc.setFont('helvetica', 'bold');
                setColor(BLACK);
                doc.text(s.category, LEFT, y);
                doc.setFont('helvetica', 'normal');
                const itemsX = LEFT + doc.getTextWidth(s.category) + 2;
                const itemsWidth = RIGHT - itemsX;
                const itemLines = doc.splitTextToSize(s.items, itemsWidth);
                doc.text(itemLines[0], itemsX, y);
                if (itemLines.length > 1) {
                    y += 4;
                    doc.text(itemLines[1], itemsX, y);
                }
                y += 5;
            });
        
            // ── Academic Service
            y += 3;
            if (y > 250) { doc.addPage(); y = TOP; }
            y = drawModernSectionHeader(doc, "Academic Service", LEFT, y);
            doc.setFontSize(10);
            
            doc.setFont('helvetica', 'bold');
            setColor(BLACK);
            doc.text("Journal Reviewer:", LEFT, y);
            y += 5;
            doc.setFont('helvetica', 'normal');
            setColor(GREY);
            doc.text("• IEEE Transactions on Multimedia", LEFT + 5, y);
            y += 4;
            doc.text("• Neural Computing and Applications", LEFT + 5, y);
            y += 4;
            doc.text("• Applied Soft Computing", LEFT + 5, y);
            y += 5;
            
            doc.setFont('helvetica', 'bold');
            setColor(BLACK);
            doc.text("Conference Reviewer:", LEFT, y);
            y += 5;
            doc.setFont('helvetica', 'normal');
            setColor(GREY);
            doc.text("• ICCV 2025 - International Conference on Computer Vision", LEFT + 5, y);
            y += 4;
            doc.text("• VISAPP 2025 - International Conference on Computer Vision Theory and Applications", LEFT + 5, y);
            y += 8;
            
            // ── Languages (Updated to display in separate rows)
            if (y > 250) { doc.addPage(); y = TOP; }
            y = drawModernSectionHeader(doc, "Languages", LEFT, y);
            doc.setFontSize(10);
            
            const languages = [
                { lang: "Punjabi/Urdu", level: "Native" },
                { lang: "English", level: "Fluent (C2)" },
                { lang: "Italian", level: "Elementary (A2)" },
                { lang: "Chinese", level: "Basic (A1)" }
            ];
            
            languages.forEach(l => {
                if (y > 270) { doc.addPage(); y = TOP; }
                doc.setFont('helvetica', 'bold');
                setColor(BLACK);
                doc.text(l.lang + ":", LEFT, y);
                doc.setFont('helvetica', 'normal');
                setColor(GREY);
                doc.text(l.level, LEFT + doc.getTextWidth(l.lang + ":") + 2, y);
                y += 4.5;
            });
            
            y += 5;

            // ── References
            if (y > 240) { doc.addPage(); y = TOP; }
            y = drawModernSectionHeader(doc, "References", LEFT, y);
            doc.setFontSize(10);
            
            if (typeof references !== 'undefined') {
                references.forEach(r => {
                    if (y > 260) { doc.addPage(); y = TOP; }
                    
                    doc.setFont('helvetica', 'bold');
                    setColor(BLACK);
                    doc.text(r.name, LEFT, y);
                    y += 4.5;
                    
                    doc.setFont('helvetica', 'normal');
                    setColor(BLACK);
                    doc.text(r.role, LEFT, y);
                    y += 4.5;
                    
                    setColor(GREY);
                    doc.setFontSize(9);
                    doc.text(`${r.email}  •  ${r.phone}`, LEFT, y);
                    doc.setFontSize(10);
                    y += 8;
                });
            }
        
            // ── Research Publications
            if (y > 240) { doc.addPage(); y = TOP; }
            y = drawModernSectionHeader(doc, "Research Publications", LEFT, y);
            doc.setFontSize(9);
            
            if (typeof allPublications !== 'undefined') {
                allPublications.forEach((pub, index) => {
                    if (y > 260) { doc.addPage(); y = TOP; }
                    
                    // Publication number in oxford blue
                    setColor(ACCENT);
                    doc.setFont('helvetica', 'bold');
                    doc.text(`[${index + 1}]`, LEFT, y);
                    
                    const titleX = LEFT + 8;
                    const maxW = RIGHT - titleX;
                    
                    // Title in bold black
                    setColor(BLACK);
                    doc.setFont('helvetica', 'bold');
                    let titleTxt = pub.title;
                    if (pub.oral) titleTxt += " (Oral Presentation)";
                    
                    const titleLines = doc.splitTextToSize(titleTxt, maxW);
                    titleLines.forEach(line => {
                        doc.text(line, titleX, y);
                        y += 4;
                    });
                    
                    // Authors in regular
                    doc.setFont('helvetica', 'normal');
                    setColor(BLACK);
                    const authorsStr = pub.authors.join(', ');
                    const authorLines = doc.splitTextToSize(authorsStr, maxW);
                    authorLines.forEach(line => {
                        doc.text(line, titleX, y);
                        y += 4;
                    });
                    
                    // Venue in italic grey
                    doc.setFont('helvetica', 'italic');
                    setColor(GREY);
                    const venueLines = doc.splitTextToSize(pub.venue, maxW);
                    venueLines.forEach(line => {
                        doc.text(line, titleX, y);
                        y += 4;
                    });
                    doc.setFont('helvetica', 'normal');
                    
                    y += 4;
                });
            }
        
            // ── Set PDF properties
            doc.setProperties({
                title: 'Muhammad Aqeel - CV',
                subject: 'Curriculum Vitae',
                author: 'Muhammad Aqeel',
                keywords: 'PhD, Computer Science, Anomaly Detection, Machine Learning',
                creator: 'Muhammad Aqeel'
            });
        
            // ── Open in new tab
            const pdfBlob = doc.output('blob');
            const pdfUrl = URL.createObjectURL(pdfBlob);
            
            // Open in new tab
            const newWindow = window.open(pdfUrl, '_blank');
            
            // Try to set the document title
            if (newWindow) {
                newWindow.document.title = 'Muhammad_Aqeel_CV.pdf';
            }
        }

    </script>
</body>
</html>
